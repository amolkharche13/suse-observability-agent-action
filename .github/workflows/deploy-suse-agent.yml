name: Install SUSE Observability Agent

on:
  push:

jobs:
  deploy-suse-observability-agent:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Use local action to install SUSE Observability Agent
        uses: ./
        with:
          stackstate_API_Key: ${{ secrets.stackstate_API_Key }}
          stackstateClusterName: 'testing-amolk'
          stackstate_URL: 'https://rancher-hosted.app.stackstate.io/receiver/stsAgent'
          Namespace: "suse-observability"
          ChartVersion: 1.1.2